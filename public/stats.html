<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Link Stats - LinkSnap</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <a href="/" class="logo">
        <div class="logo-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
          </svg>
        </div>
        <span class="logo-text">Link<span class="gradient-text">Snap</span></span>
      </a>
      <nav class="nav">
        <a href="/" class="nav-link">Dashboard</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main dashboard-main">
    <div class="container">
      <!-- Loading State -->
      <div id="loading-state" class="loading-container">
        <div class="spinner"></div>
        <p>Loading link stats...</p>
      </div>

      <!-- Error State -->
      <div id="error-state" class="error-container hidden">
        <div class="error-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <h2>Link Not Found</h2>
        <p id="error-text">The link you're looking for doesn't exist.</p>
        <a href="/" class="btn btn-primary">Back to Dashboard</a>
      </div>

      <!-- Stats Content -->
      <div id="stats-content" class="hidden">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
          <a href="/">Dashboard</a>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
          <span id="breadcrumb-code"></span>
        </div>

        <!-- Link Info Card -->
        <div class="card stats-header-card">
          <div class="stats-header">
            <div class="stats-info">
              <div class="code-display">
                <span class="code-label">Short Code</span>
                <div class="code-value">
                  <span id="link-code" class="code-text"></span>
                  <button id="copy-code-btn" class="btn btn-ghost" title="Copy short URL">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="url-display">
                <span class="url-label">Target URL</span>
                <a id="link-url" href="#" target="_blank" class="url-value"></a>
              </div>
            </div>
            <div class="stats-actions">
              <button id="delete-btn" class="btn btn-danger">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"/>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                </svg>
                <span>Delete</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid stats-detail-grid">
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon blue">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M15 15l-2 5L9 9l11 4-5 2z"/>
                  <path d="M15 15l5 5"/>
                </svg>
              </div>
              <span class="stat-label">Total Clicks</span>
            </div>
            <div id="total-clicks" class="stat-value">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon emerald">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </div>
              <span class="stat-label">Last Clicked</span>
            </div>
            <div id="last-clicked" class="stat-value">Never</div>
          </div>
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-icon brand">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </div>
              <span class="stat-label">Created</span>
            </div>
            <div id="created-at" class="stat-value">-</div>
          </div>
        </div>

        <!-- Recent Visits -->
        <section class="section">
          <h2 class="section-title">Recent Visits</h2>
          <div class="card table-card">
            <div id="visits-loading" class="table-state">
              <div class="spinner"></div>
            </div>
            <div id="visits-empty" class="table-state hidden">
              <p>No visits yet</p>
            </div>
            <div id="visits-table-wrapper" class="table-wrapper hidden">
              <table class="table">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th class="hide-mobile">Referrer</th>
                    <th class="hide-tablet">User Agent</th>
                  </tr>
                </thead>
                <tbody id="visits-table-body">
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-brand">
        <div class="footer-logo">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
          </svg>
        </div>
        <span>LinkSnap</span>
      </div>
      <p class="footer-text">Built with Node.js & Express</p>
    </div>
  </footer>

  <script src="/js/stats.js"></script>
</body>
</html>

